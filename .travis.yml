language: python
python: 2.7
sudo: required
before_script:
 - export PROJDIR=$PWD
 - wget https://sourceforge.net/projects/pyqt/files/sip/sip-4.19.8/sip-4.19.8.tar.gz
 - tar xf sip-4.19.8.tar.gz
 - cd sip-4.19.8
 - echo 'yes' | python ./configure.py
 - make -j9
 - make install
 - cd ..
# - wget http://mirrors.kernel.org/ubuntu/pool/main/q/qtbase-opensource-src/qt5-qmake_5.9.1+dfsg-10ubuntu1_amd64.deb
# - sudo dpkg -i qt5-qmake_5.9.1+dfsg-10ubuntu1_amd64.deb
 - wget https://sourceforge.net/projects/pyqt/files/PyQt5/PyQt-5.10.1/PyQt5_gpl-5.10.1.tar.gz
 - tar -xf PyQt5_gpl-5.10.1.tar.gz
 - cd PyQt5_gpl-5.10.1
 - python ./configure.py --no-python-dbus --no-qml-plugin --no-qsci-api --no-tools --confirm-license --disable QtNfc --disable QtHelp --disable QtMultimedia --disable QtMultimediaWidgets --disable QtNetwork --disable QtOpenGL --disable QtPrintSupport --disable QtQml --disable QtQuick --disable QtSql --disable QtSvg --disable QtTest --disable QtWebKit --disable QtWebKitWidgets --disable QtXml --disable QtXmlPatterns --disable QtDesigner --disable QAxContainer --disable QtDBus --disable QtWebSockets --disable QtWebChannel --disable QtNfc --disable QtBluetooth --disable QtX11Extras --disable QtQuickWidgets --disable _QOpenGLFunctions_2_0 --disable _QOpenGLFunctions_2_1 --disable _QOpenGLFunctions_4_1_Core
 - make -j9
 - make install
 - cd $PROJDIR
addons:
  apt:
    packages:
      - libc6
      - libgcc1
      - libqt5core5a
      - libqt5dbus5
      - libqt5designer5
      - libqt5gui5
      - libqt5help5
      - libqt5network5
      - libqt5printsupport5
      - libqt5test5
      - libqt5widgets5
      - libqt5xml5
      - libstdc++6
      - qtchooser
      - qt5-qmake
      - qt5-default
install: pip install pydh twisted pycryptodome pycryptodomex nclib https://github.com/bjones1/pyinstaller/archive/pyqt5_fix.zip
script: python make.py build all