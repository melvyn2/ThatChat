language: python
python: 2.7
#deploy:
#  provider: releases
#  api_key:
#   secure: "yxtrSu/a4uVjCXjkT6y9vzns1g0H0xYx9suNYr7KWotrkud78vGYfg/qkS3R4mT8cKOqtNq5gxszNeH9DkTKVI/XD9049/NU/BNMnWRoqiEJTTaWCLdb0HSsmdKUWKxdoBROXnwA5w4ZKgfL6Wr2lssWqC3uQ2TuqTmVj0SNX9kf/JO8pqZ/Nj5u8Okr0ZmZDYPlX6g2smrTz5lRxw7JKtqODnlJsH4pUz7EgYQcmDNHFd2WNUvFziATLG9NnYo6WkRqvraN+E8XT0qN5MD1xabhAAGSGdHl9rV2XFW9knWvywV4IwevphsRQjat9L8PulKuznUd1dI+8/M0O9deEzmUG8owp2o4K2ur7bkfIcOBhH+FupavLshCIPyTnUZKSkb+xq68izv4FHz9QG6wy57vNMSiCEGPKfZ66MY/eOngiZix8NrXidVoYxAW15vLnr/iGP/Ag8G3E4NrzcvmsfEeZ8X/lyWcGQ+DWKuesrG9C7sqrg5k82badzjJvW8wzWNinU6gGo709AOuaERf9eFMDckSfGFXlVAHh8QTP8vydhbQn3DaRW02O8FzK9i4bRDmhUZ2bKlpzWdO7DDce/En6b1evsEnIlEqQL63vJ8bjIVtfNy6XBuzU58mOpFQ//MPxxYFBSwf2tUPWMB3z63dVuEsRzJY9i/PAjh4AuY="
#  file:
#   - 'dist/linux/PyChat'
#   - 'dist/linux/PyChatServer'
#  skip_cleanup: true
#  on:
#    tags: true
before_script:
 - export PROJDIR=$PWD
 - wget https://sourceforge.net/projects/pyqt/files/sip/sip-4.19.8/sip-4.19.8.tar.gz
 - tar xf sip-4.19.8.tar.gz
 - cd sip-4.19.8
 - echo 'yes' | python ./configure.py
 - make -j9
 - make install
 - cd ..
 - wget https://sourceforge.net/projects/pyqt/files/PyQt5/PyQt-5.10.1/PyQt5_gpl-5.10.1.tar.gz
 - tar -xf PyQt5_gpl-5.10.1.tar.gz
 - cd PyQt5_gpl-5.10.1
 - python ./configure.py --no-python-dbus --no-qml-plugin --no-qsci-api --no-tools --confirm-license --disable QtNfc --disable QtHelp --disable QtMultimedia --disable QtMultimediaWidgets --disable QtNetwork --disable QtOpenGL --disable QtPrintSupport --disable QtQml --disable QtQuick --disable QtSql --disable QtSvg --disable QtTest --disable QtWebKit --disable QtWebKitWidgets --disable QtXml --disable QtXmlPatterns --disable QtDesigner --disable QAxContainer --disable QtDBus --disable QtWebSockets --disable QtWebChannel --disable QtNfc --disable QtBluetooth --disable QtX11Extras --disable QtQuickWidgets --disable _QOpenGLFunctions_2_0 --disable _QOpenGLFunctions_2_1 --disable _QOpenGLFunctions_4_1_Core
 - make -j9
 - make install
 - cd $PROJDIR
addons:
  apt:
    packages:
      - libc6
      - libgcc1
      - libqt5core5a
      - libqt5dbus5
      - libqt5designer5
      - libqt5gui5
      - libqt5help5
      - libqt5network5
      - libqt5printsupport5
      - libqt5test5
      - libqt5widgets5
      - libqt5xml5
      - libstdc++6
      - qtchooser
      - qt5-qmake
      - qt5-default
install:
  - pip install urllib3[secure] pyyaml pydh twisted pycryptodomex nclib https://github.com/bjones1/pyinstaller/archive/pyqt5_fix_cleaned.zip
  - pip install --upgrade setuptools
script: python make.py build all
